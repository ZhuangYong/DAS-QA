webpackJsonp([24],{774:function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=function get(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=n(0),a=_interopRequireDefault(l),u=n(777),s=_interopRequireDefault(u),c=n(105),f=n(106),d=n(288),p=_interopRequireDefault(d),m=n(290),b=_interopRequireDefault(m),v=n(283),h=n(289),y=n(87),g=_interopRequireDefault(y),_=n(109),E=_interopRequireDefault(_),C=n(287),R={submitBtn:{display:"block",borderRadius:"50px",margin:"0 auto",width:"240px",height:"50px"},singleItem:{paddingLeft:(0,v.toRem)(20),paddingRight:(0,v.toRem)(20),width:"100%"},input:{width:"100%",height:(0,v.toRem)(110),textIndent:"10px",fontSize:(0,v.toRem)(36),border:"none",borderRadius:"4px",backgroundColor:"#f0f3f5",color:"#222"},tab:{display:"inline-block",marginRight:(0,v.toRem)(20),width:(0,v.toRem)(120),height:(0,v.toRem)(60),border:"1px solid",borderRadius:"5px",color:"#222",textAlign:"center",lineHeight:(0,v.toRem)(60),borderColor:"#dadada"},tabActive:{display:"inline-block",marginRight:(0,v.toRem)(20),width:(0,v.toRem)(120),height:(0,v.toRem)(60),border:"1px solid",borderRadius:"5px",textAlign:"center",lineHeight:(0,v.toRem)(60),color:"#ff6832",borderColor:"#ff6832"}},O=function(e){function InvoiceSubmit(e){_classCallCheck(this,InvoiceSubmit);var t=_possibleConstructorReturn(this,(InvoiceSubmit.__proto__||Object.getPrototypeOf(InvoiceSubmit)).call(this,e));return o(InvoiceSubmit.prototype.__proto__||Object.getPrototypeOf(InvoiceSubmit.prototype),"title",t).call(t,"开票"),t.state={totalMoney:t.props.match.params.totalMoney.replace("-","."),openDialog:!1,submitParams:{ids:t.props.match.params.ids.replace("-",","),gflx:"01",gfmc:"",gfsh:"",gfsj:""}},t.handleAction=t.handleAction.bind(t),t.handleClose=t.handleClose.bind(t),t}return _inherits(InvoiceSubmit,e),r(InvoiceSubmit,[{key:"render",value:function(){var e=this,t=this.state.totalMoney,n=this.state.submitParams,r=[a.default.createElement(g.default,{className:"cancel-button",label:"取消",primary:!0,onClick:this.handleClose}),a.default.createElement(g.default,{className:"sure-button",label:"确认提交",primary:!0,onClick:this.handleAction})];return a.default.createElement("div",{style:{fontSize:(0,v.toRem)(36),lineHeight:(0,v.toRem)(110),color:"#999"}},a.default.createElement("section",{style:R.singleItem},a.default.createElement("span",null,"发票类型: "),a.default.createElement("span",{style:{color:"#222"}},"增值税普通发票")),a.default.createElement("section",{style:i({},R.singleItem,{borderTop:"1px solid #d7d7d7"})},a.default.createElement("header",null,"*发票抬头"),a.default.createElement("div",null,a.default.createElement("span",{style:"01"===n.gflx?R.tabActive:R.tab,onClick:function(){n.gflx="01",e.setState({submitParams:n})}},"公司"),a.default.createElement("span",{style:"03"===n.gflx?R.tabActive:R.tab,onClick:function(){n.gflx="03",e.setState({submitParams:n})}},"个人")),a.default.createElement("input",{style:R.input,onChange:function(t){n.gfmc=t.target.value,e.setState({submitParams:n})},placeholder:"请输入发票抬头",type:"text"})),a.default.createElement("section",{style:i({},R.singleItem,{paddingBottom:(0,v.toRem)(20),borderBottom:"1px solid #d7d7d7"})},a.default.createElement("header",null,"*纳税人识别号"),a.default.createElement("input",{style:R.input,onChange:function(t){n.gfsh=t.target.value,e.setState({submitParams:n})},placeholder:"请输入纳税人识别号",type:"text"})),a.default.createElement("section",{style:R.singleItem},a.default.createElement("span",null,"发票金额: "),a.default.createElement("span",{style:{color:"#222"}},"¥",t)),a.default.createElement("section",{style:R.singleItem},a.default.createElement("span",null,"*收票人手机: "),a.default.createElement("input",{style:R.input,onChange:function(t){n.gfsj=t.target.value,e.setState({submitParams:n})},placeholder:"请输入收票手机号码",type:"text"})),a.default.createElement("div",{style:{width:"100%",height:"80px"}}),a.default.createElement("section",{style:{position:"fixed",bottom:0,left:0,width:"100%",backgroundColor:"#fff",padding:"10px 10px"}},a.default.createElement(b.default,{backgroundColor:"#ff8632",disabledBackgroundColor:"#ccc",disabled:!1,label:"提交",style:R.submitBtn,buttonStyle:R.submitBtn,labelStyle:{lineHeight:"50px",fontSize:"18px",color:"#fff"},onClick:function(){return n.gfmc.length<=0?void e.props.action_setGlobAlert("请输入发票抬头"):/^([A-Z\d]{15}|[A-Z\d]{18}|[A-Z\d]{20})$/.test(n.gfsh)?/^1[3|4|5|8][0-9]\d{4,8}$/.test(n.gfsj)?void e.setState({openDialog:!0}):void e.props.action_setGlobAlert("请输入正确的手机号"):void e.props.action_setGlobAlert("请输入正确的纳税人识别号")}})),a.default.createElement(E.default,{className:"dialog-panel dialog-orderSubmit",actionsContainerStyle:{borderTop:".01rem solid #e0e0e0",textAlign:"center"},contentStyle:{textAlign:"left"},actions:r,modal:!1,open:this.state.openDialog,onRequestClose:this.handleClose},a.default.createElement("ul",{style:{listStyle:"none",padding:0,margin:0,color:"#999",lineHeight:(0,v.toRem)(45)}},a.default.createElement("li",null,"抬头类型: ",a.default.createElement("span",{style:{color:"#212121"}},"03"===n.gflx?"个人":"公司")),a.default.createElement("li",null,"发票类型: ",a.default.createElement("span",{style:{color:"#212121"}},"增值税普通发票")),a.default.createElement("li",null,"发票抬头: ",a.default.createElement("span",{style:{color:"#212121"}},n.gfmc)),a.default.createElement("li",null,"纳税人识别号: ",a.default.createElement("span",{style:{color:"#212121"}},n.gfsh)),a.default.createElement("li",null,"电话: ",a.default.createElement("span",{style:{color:"#212121"}},n.gfsj)),a.default.createElement("li",{style:{fontSize:(0,v.toRem)(14)+" !important"}},"*提交后请到开票历史中查看开票进度"))))}},{key:"handleAction",value:function(){var e=this,t=this.state.submitParams;console.log(t),this.props.submitInvoiceAction(t,(0,v.reqHeader)(t),function(t){var n=t.status;1===parseInt(n,10)&&(e.setState({openDialog:!1}),(0,v.linkTo)("user/invoiceSubmitSuccess",!1,null))})}},{key:"handleClose",value:function(){this.setState({openDialog:!1})}}]),InvoiceSubmit}(s.default);O.defaultProps={},O.propTypes={};var S=function(e,t){return{result:e.app.user.orderForm}},P=function(e,t){return{action_setGlobAlert:(0,p.default)(C.setGlobAlert,e),submitInvoiceAction:(0,p.default)(h.submitInvoice,e)}};t.default=(0,f.withRouter)((0,c.connect)(S,P)(O))},777:function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(0),o=n(284),l=_interopRequireDefault(o),a=(n(106),n(105),n(19)),u=_interopRequireDefault(a),s=function(e){function BaseComponent(e){_classCallCheck(this,BaseComponent);var t=_possibleConstructorReturn(this,(BaseComponent.__proto__||Object.getPrototypeOf(BaseComponent)).call(this,e));return t.bindState.bind(t),t.title=t.title.bind(t),l.default.setHistory(t.props.history),t}return _inherits(BaseComponent,e),i(BaseComponent,[{key:"render",value:function(){return React.createElement("div",null)}},{key:"bindState",value:function(e){var t=this;return function(n){var i={};i[e]=n,t.setState(i)}}},{key:"title",value:function(e){document.title=e}},{key:"validUserStatus",value:function(e,t,n){var i=t||{},r=i.data,o=r||{},l=o.systemTime,a=o.timeStamp,s=this.isVip(e),c=this.isBindDevice(e),f=this.isFreeActivation(e);if("string"==typeof c)return n&&n(c),"正在获取用户信息";if(!1===c)return n&&n("",u.default.COMMON.ALERT_TYPE_BIND_DEVICE),!1;if(!0===c){if(!0===f)return n&&n("",u.default.COMMON.ALERT_TYPE_FREE_ACTIVE),!1;if(!1===f)return function(){return!(!l||!a)&&!(l-a>72e4)}()?!1!==s||(n&&n("",u.default.COMMON.ALERT_TYPE_BE_VIP),!1):(n&&n("",u.default.COMMON.ALERT_TYPE_DEVICE_NOT_ONLINE),!1)}}},{key:"validUserBindDevice",value:function(e,t){var n=this.isBindDevice(e);return"string"==typeof n?(t&&t(n),n):!1===n?(t&&t("",u.default.COMMON.ALERT_TYPE_BIND_DEVICE),!1):!0===n||void 0}},{key:"validUserDeviceOnline",value:function(e,t){var n=e||{},i=n.data,r=i||{},o=r.systemTime,l=r.timeStamp;if(o&&l){return!!!(o-l>72e4)||(t&&t("",u.default.COMMON.ALERT_TYPE_DEVICE_NOT_ONLINE),!1)}return t&&t("",u.default.COMMON.ALERT_TYPE_DEVICE_NOT_ONLINE),!1}},{key:"isFreeActivation",value:function(e){var t=e||{},n=t.status,i=t.data;if(void 0!==n){return 1===i.isFreeActivation}return"正在获取用户信息"}},{key:"isBindDevice",value:function(e){var t=e||{},n=t.status,i=t.msg,r=t.data;if(void 0!==n){if(-100===n)return"请使用微信操作";if(1===n){var o=r.isReDevice;r.bindExpireTime;return 1===o}return i||"获取用户信息失败，请稍后重试！"}return"正在获取用户信息"}},{key:"isVip",value:function(e){var t=e||{},n=t.status,i=t.data;if(void 0!==n){var r=i.vipStatus,o=i.expireTime;return 1===r&&(new Date).getTime()<o}return"正在获取用户信息"}},{key:"vipTime",value:function(e){var t=e||{},n=t.status,i=t.data;if(void 0!==n){var r=i.vipStatus,o=i.expireTime;return 1===r?o-(new Date).getTime():"0"}return"正在获取用户信息"}}]),BaseComponent}(r.Component);t.default=s}});