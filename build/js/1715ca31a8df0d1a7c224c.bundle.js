webpackJsonp([17],{725:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=function get(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)},i=r(0),a=_interopRequireDefault(i),u=r(745),s=_interopRequireDefault(u),l=r(101),c=r(102),f=r(282),p=_interopRequireDefault(f),d=r(1),h=_interopRequireDefault(d),b=r(874),_=_interopRequireDefault(b),y=r(278),v=_interopRequireDefault(y),m=r(283),g=r(277),O=r(774),P=_interopRequireDefault(O),E=r(281),C=function(e){function Login(e){_classCallCheck(this,Login);var t=_possibleConstructorReturn(this,(Login.__proto__||Object.getPrototypeOf(Login)).call(this,e));return o(Login.prototype.__proto__||Object.getPrototypeOf(Login.prototype),"title",t).call(t,"登录"),t.state={matchParams:t.props.match.params},t}return _inherits(Login,e),n(Login,[{key:"componentDidUpdate",value:function(e){var t=this.props.match.params;e.match.params.state!==t.state&&this.setState({matchParams:t})}},{key:"render",value:function(){var e=this;return a.default.createElement(P.default,{src:_.default,disabled:void 0===this.state.matchParams.uuid,content:this.matchPages(),imgStyle:{width:"180px"},buttonLabel:"确认登录",hideButton:"home"!==this.state.matchParams.state,touchTap:function(){if(!window.sysInfo.isWeixin)return void e.props.action_setGlobAlert("请在微信客户端操作");var t=e.state.matchParams.uuid;if(void 0!==t){var r={uuid:t};e.props.ottLoginAction(r,(0,g.reqHeader)(r),function(e){var t=e.status,r=e.data;e.msg;302===parseInt(t,10)?window.location.href=r:1===parseInt(t,10)&&v.default.replace("/login/success")})}}})}},{key:"matchPages",value:function(){var e=this.state.matchParams,t="";switch(e.state){case"home":t="微信授权金麦客登录确认";break;case"success":t="恭喜您，登录成功";break;case"failed":t="您的登录出现了问题";break;case"invalid":t="扫描二维码已失效";break;default:v.default.replace("/*")}return t}}]),Login}(s.default);C.defaultProps={result:{}},C.propTypes={result:h.default.object};var w=function(e,t){return{result:e.app.user.ottLogin}},R=function(e,t){return{ottLoginAction:(0,p.default)(m.OTTLogin,e),action_setGlobAlert:(0,p.default)(E.setGlobAlert,e)}};t.default=(0,c.withRouter)((0,l.connect)(w,R)(C))},745:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(0),i=r(278),a=_interopRequireDefault(i),u=(r(102),r(101),r(19)),s=_interopRequireDefault(u),l=function(e){function BaseComponent(e){_classCallCheck(this,BaseComponent);var t=_possibleConstructorReturn(this,(BaseComponent.__proto__||Object.getPrototypeOf(BaseComponent)).call(this,e));return t.bindState.bind(t),t.title=t.title.bind(t),a.default.setHistory(t.props.history),t}return _inherits(BaseComponent,e),n(BaseComponent,[{key:"render",value:function(){return React.createElement("div",null)}},{key:"bindState",value:function(e){var t=this;return function(r){var n={};n[e]=r,t.setState(n)}}},{key:"title",value:function(e){document.title=e}},{key:"validUserStatus",value:function(e,t,r){var n=t||{},o=n.data,i=o||{},a=i.systemTime,u=i.timeStamp,l=this.isVip(e),c=this.isBindDevice(e),f=this.isFreeActivation(e);if("string"==typeof c)return r&&r(c),"正在获取用户信息";if(!1===c)return r&&r("",s.default.COMMON.ALERT_TYPE_BIND_DEVICE),!1;if(!0===c){if(!0===f)return r&&r("",s.default.COMMON.ALERT_TYPE_FREE_ACTIVE),!1;if(!1===f)return function(){return!(!a||!u)&&!(a-u>72e4)}()?!1!==l||(r&&r("",s.default.COMMON.ALERT_TYPE_BE_VIP),!1):(r&&r("",s.default.COMMON.ALERT_TYPE_DEVICE_NOT_ONLINE),!1)}}},{key:"validUserBindDevice",value:function(e,t){var r=this.isBindDevice(e);return"string"==typeof r?(t&&t("正在获取用户信息，请稍后重试！"),"正在获取用户信息"):!1===r?(t&&t("",s.default.COMMON.ALERT_TYPE_BIND_DEVICE),!1):!0===r||void 0}},{key:"validUserDeviceOnline",value:function(e,t){var r=e||{},n=r.data,o=n||{},i=o.systemTime,a=o.timeStamp;if(i&&a){return!!!(i-a>72e4)||(t&&t("",s.default.COMMON.ALERT_TYPE_DEVICE_NOT_ONLINE),!1)}return t&&t("",s.default.COMMON.ALERT_TYPE_DEVICE_NOT_ONLINE),!1}},{key:"isFreeActivation",value:function(e){var t=e||{},r=t.status,n=t.data;if(void 0!==r){return 1===n.isFreeActivation}return"正在获取用户信息"}},{key:"isBindDevice",value:function(e){var t=e||{},r=t.status,n=t.msg,o=t.data;if(void 0!==r){if(-100===r)return"请使用微信操作";if(1===r){var i=o.isReDevice;o.bindExpireTime;return 1===i}return n||"获取用户信息失败，请稍后重试！"}return"正在获取用户信息"}},{key:"isVip",value:function(e){var t=e||{},r=t.status,n=t.data;if(void 0!==r){var o=n.vipStatus,i=n.expireTime;return 1===o&&(new Date).getTime()<i}return"正在获取用户信息"}}]),BaseComponent}(o.Component);t.default=l},774:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(0),a=_interopRequireDefault(i),u=r(285),s=_interopRequireDefault(u),l={submitBtn:{position:"absolute",left:"50%",bottom:"80px",marginLeft:"-120px",width:"240px",height:"50px",borderRadius:"50px",overflow:"hidden"}},c=function(e){function ButtonPage(e){return _classCallCheck(this,ButtonPage),_possibleConstructorReturn(this,(ButtonPage.__proto__||Object.getPrototypeOf(ButtonPage)).call(this,e))}return _inherits(ButtonPage,e),o(ButtonPage,[{key:"render",value:function(){return a.default.createElement("section",{style:n({},{width:"100%"},this.props.style)},a.default.createElement("header",null,this.props.headerDom||a.default.createElement("div",null,a.default.createElement("img",{style:n({},{display:"block",margin:"130px auto 0",width:"100px"},this.props.imgStyle),src:this.props.src,alt:""}),a.default.createElement("div",{style:n({},{marginTop:"8px",textAlign:"center",color:"#ff8632",fontSize:"18px"},this.props.contentStyle)},this.props.content))),!this.props.hideButton&&a.default.createElement(s.default,{disabled:this.props.disabled,backgroundColor:"#ff8632",disabledBackgroundColor:"#ccc",label:this.props.buttonLabel,style:n({},l.submitBtn,this.props.raisedButtonStyles),buttonStyle:this.props.buttonStyles,labelStyle:n({},{lineHeight:"50px",fontSize:"18px",color:"#fff"},this.props.buttonLabelStyles),onClick:this.props.touchTap}))}}]),ButtonPage}(a.default.Component);t.default=c},874:function(e,t,r){e.exports=r.p+"img/login.png?966603e4940750db2eba658a077d68a7"}});